name: ðŸ”„ Update env

on:
  workflow_dispatch:
  push:
    branches:
      - 'master'

#    inputs:
#      host:
#        description: 'Winnie-svc host'
#        required: false
#        type: string
#        default: "https://winnie-svc.infra-internal.ajax.systems"
#  schedule:
#    - cron: "*/5 * * * *"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Split multiline secret and export env vars
        run: |
          # Save the secret into a file

          while IFS= read -r line; do
            [[ -z "$line" || "$line" =~ ^# ]] && continue
            
            export "$line"

            echo "$line" >> $GITHUB_ENV
          done < "${{ secrets.AES_KEYS }}"

      - name: Use var
        run: |
          echo $STAGE_AES_KEY
        
